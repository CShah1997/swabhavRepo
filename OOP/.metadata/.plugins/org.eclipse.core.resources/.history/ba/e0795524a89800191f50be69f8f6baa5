package com.techlabs.game;

import com.techlabs.exception.CellIsAlredyMarkedException;

public class Game {
	
	private Board board;
	private GameState status=GameState.PLAYING;
	private ResultAnalyzer analyzer;
	private Player p1,p2,currentPlayer;
	private int playerMoveCount=1;

	public Game(Player player1, Player player2) {
		this.p1=player1;
		this.p2=player2;
		board=new Board();
		analyzer=new ResultAnalyzer(board);
		currentPlayer=p1;
	}
	
	public void makePlayerMove(int row,int column) throws CellIsAlredyMarkedException
	{
		board.putMarkOnCell(currentPlayer.getMark(), row, column);
	}
	
	public GameState play(int row,int column)
	{
		currentPlayer=getCurrentPlayer();
		makePlayerMove(row, column);
		
		return status;
		
	}
	
	private Player getCurrentPlayer() 
	{
		if(playerMoveCount%2==0)
		{
			return p2;
		}
		return p1;
	}

	public int getMoveCount()
	{
		return playerMoveCount;
	}

}
